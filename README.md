–°–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ Java
–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤.

üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

‚ú® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ URL: –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ 8-—Å–∏–º–≤–æ–ª—å–Ω—ã–µ –∫–æ–¥—ã

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ: –í—Å–µ —Å—Å—ã–ª–∫–∏ –∂–∏–≤—É—Ç —Ä–æ–≤–Ω–æ 24 —á–∞—Å–∞

–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å—Å—ã–ª–∫–∏

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞: –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ —É–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Å—Å—ã–ª–∫–∏

–ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏: –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ UUID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: ConcurrentHashMap –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: SecureRandom –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –°–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è

üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

src/

‚îú‚îÄ‚îÄ Main.java                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

‚îú‚îÄ‚îÄ LinkShortenerService.java    # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

‚îú‚îÄ‚îÄ ShortLink.java              # –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–∫–∏

‚îú‚îÄ‚îÄ ShortCodeGenerator.java     # –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤

‚îî‚îÄ‚îÄ LinkExpirationService.java  # –§–æ–Ω–æ–≤–∞—è —Å–ª—É–∂–±–∞ –æ—á–∏—Å—Ç–∫–∏
–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. LinkShortenerService
–û—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å —Å –ø—É–±–ª–∏—á–Ω—ã–º API:

java
public ShortLink createShortLink(String url, String userId, int limit)
public Optional<String> processRedirect(String shortCode)
public List<ShortLink> getUserLinks(String userId)
public boolean deleteLink(String userId, String shortCode)
public void cleanupExpiredLinks()
2. –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
java
// –û—Å–Ω–æ–≤–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: –∫–æ–¥ ‚Üí –æ–±—ä–µ–∫—Ç ShortLink
private final Map<String, ShortLink> linksByCode = new ConcurrentHashMap<>();

// –ò–Ω–¥–µ–∫—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: userId ‚Üí —Å–ø–∏—Å–æ–∫ –∫–æ–¥–æ–≤
private final Map<String, List<String>> userLinks = new ConcurrentHashMap<>();
3. ShortLink - –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö
–°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å—Å—ã–ª–∫–µ:

–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL –∏ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥

–í–ª–∞–¥–µ–ª–µ—Ü (userId) –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –∏—Å—Ç–µ—á–µ–Ω–∏–µ)

–°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

4. LinkExpirationService
–§–æ–Ω–æ–≤–∞—è —Å–ª—É–∂–±–∞, –∫–æ—Ç–æ—Ä–∞—è:

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

–í—ã–ø–æ–ª–Ω—è–µ—Ç –æ—á–∏—Å—Ç–∫—É –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç

–ì—Ä–∞—Ü–∏–æ–∑–Ω–æ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ

üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
Java JDK 11 –∏–ª–∏ –≤—ã—à–µ

100 –ú–ë —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏

–ö–æ–Ω—Å–æ–ª—å/—Ç–µ—Ä–º–∏–Ω–∞–ª —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UTF-8

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞
–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã

bash
mkdir url-shortener && cd url-shortener
–°–æ–∑–¥–∞–π—Ç–µ Java —Ñ–∞–π–ª—ã
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–¥ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã:

Main.java

LinkShortenerService.java

ShortLink.java

ShortCodeGenerator.java

LinkExpirationService.java

–ö–æ–º–ø–∏–ª—è—Ü–∏—è

bash
javac *.java
–ó–∞–ø—É—Å–∫

bash
java Main
–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
bash
# –û–¥–Ω–æ—Å—Ç—Ä–æ—á–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ (–µ—Å–ª–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –≤ –æ–¥–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏)
javac *.java && java Main
üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
bash
java Main
–ü—Ä–∏–º–µ—Ä —Å–µ—Å—Å–∏–∏
1. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Å—ã–ª–∫–∏
text
=== –°–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ ===

–ú–µ–Ω—é:
1. –°–æ–∑–¥–∞—Ç—å –∫–æ—Ä–æ—Ç–∫—É—é —Å—Å—ã–ª–∫—É
2. –ü–µ—Ä–µ–π—Ç–∏ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ
3. –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–∏ —Å—Å—ã–ª–∫–∏
4. –£–¥–∞–ª–∏—Ç—å —Å—Å—ã–ª–∫—É
5. –í—ã—Ö–æ–¥
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: 1

–í–≤–µ–¥–∏—Ç–µ –¥–ª–∏–Ω–Ω—ã–π URL: https://www.example.com/very/long/path/to/resource
–í–≤–µ–¥–∏—Ç–µ –ª–∏–º–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100): 50
–í–≤–µ–¥–∏—Ç–µ –≤–∞—à userId (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ):

–í–∞—à –Ω–æ–≤—ã–π userId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Å—ã–ª–∫–∞–º–∏!

–°—Å—ã–ª–∫–∞ —Å–æ–∑–¥–∞–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
–ö–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞: AbC123Xy
–õ–∏–º–∏—Ç –ø–µ—Ä–µ—Ö–æ–¥–æ–≤: 50
–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –¥–æ: 2024-01-10T14:30:45.123
2. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–æ—Ä–æ—Ç–∫–æ–π —Å—Å—ã–ª–∫–µ
text
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: 2

–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –∫–æ–¥ —Å—Å—ã–ª–∫–∏: AbC123Xy
–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞: https://www.example.com/very/long/path/to/resource
–°—Å—ã–ª–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ!
3. –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö —Å—Å—ã–ª–æ–∫
text
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: 3

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à userId: a1b2c3d4-e5f6-7890-abcd-ef1234567890

–í–∞—à–∏ —Å—Å—ã–ª–∫–∏:

–ö–æ–¥: AbC123Xy
–û—Ä–∏–≥–∏–Ω–∞–ª: https://www.example.com/very/long/path/to/resource
–ö–æ—Ä–æ—Ç–∫–∞—è —Å—Å—ã–ª–∫–∞: http://localhost:8080/AbC123Xy
–ü–µ—Ä–µ—Ö–æ–¥–æ–≤: 15/50
–°–æ–∑–¥–∞–Ω–∞: 2024-01-09T14:30:45.123
–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ: 2024-01-10T14:30:45.123
–°—Ç–∞—Ç—É—Å: –ê–∫—Ç–∏–≤–Ω–∞
4. –£–¥–∞–ª–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏
text
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: 4

–í–≤–µ–¥–∏—Ç–µ –≤–∞—à userId: a1b2c3d4-e5f6-7890-abcd-ef1234567890
–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Å—Å—ã–ª–∫–∏ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è: AbC123Xy

–°—Å—ã–ª–∫–∞ AbC123Xy —É–¥–∞–ª–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!
–ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ –≤–∫–ª—é—á–∏—Ç—å HTTP —Å–µ—Ä–≤–µ—Ä (–º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å Main.java):

bash
# –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Å—Å—ã–ª–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ:
http://localhost:8080/AbC123Xy
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤
1. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä—É—á–Ω—É—é
–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏:

bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —Å –≤–∞–ª–∏–¥–Ω—ã–º URL
2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º URL (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
3. –°–æ–∑–¥–∞–Ω–∏–µ –¥–≤—É—Ö —Å—Å—ã–ª–æ–∫ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º URL –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
–¢–µ—Å—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π:

bash
1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É —Å –ª–∏–º–∏—Ç–æ–º 2 –ø–µ—Ä–µ—Ö–æ–¥–∞
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ 3 —Ä–∞–∑–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ 3-–π –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç–∫–ª–æ–Ω–µ–Ω
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –∏—Å—á–µ—Ä–ø–∞–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
–¢–µ—Å—Ç –≤—Ä–µ–º–µ–Ω–∏ –∂–∏–∑–Ω–∏:

bash
1. –°–æ–∑–¥–∞–π—Ç–µ —Å—Å—ã–ª–∫—É
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 24 —á–∞—Å–∞ (–∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –≤—Ä–µ–º—è)
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Å—ã–ª–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
2. –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã (–ø—Ä–∏–º–µ—Ä)
–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∫–ª–∞—Å—Å LinkShortenerServiceTest.java:

java
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.BeforeEach;
import static org.junit.jupiter.api.Assertions.*;

public class LinkShortenerServiceTest {
    private LinkShortenerService service;
    private static final String USER_ID = "test-user-123";
    
    @BeforeEach
    void setUp() {
        service = new LinkShortenerService();
    }
    
    @Test
    void testCreateShortLink() {
        ShortLink link = service.createShortLink(
            "https://example.com", USER_ID, 10);
        
        assertNotNull(link);
        assertEquals("https://example.com", link.getOriginalUrl());
        assertEquals(10, link.getClickLimit());
        assertEquals(0, link.getClickCount());
        assertTrue(link.isActive());
    }
    
    @Test
    void testUniqueCodesForSameUrl() {
        String url = "https://example.com";
        String user1 = "user1";
        String user2 = "user2";
        
        ShortLink link1 = service.createShortLink(url, user1, 10);
        ShortLink link2 = service.createShortLink(url, user2, 10);
        
        assertNotEquals(link1.getShortCode(), link2.getShortCode());
    }
    
    @Test
    void testRedirectWithinLimit() {
        ShortLink link = service.createShortLink(
            "https://example.com", USER_ID, 2);
        
        assertTrue(service.processRedirect(link.getShortCode()).isPresent());
        assertEquals(1, link.getClickCount());
        
        assertTrue(service.processRedirect(link.getShortCode()).isPresent());
        assertEquals(2, link.getClickCount());
        
        assertFalse(service.processRedirect(link.getShortCode()).isPresent());
        assertFalse(link.isActive());
    }
}
3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
java
public class IntegrationTest {
    @Test
    void testCompleteUserFlow() {
        // –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
        LinkShortenerService service = new LinkShortenerService();
        LinkExpirationService expiration = new LinkExpirationService(service);
        expiration.start();
        
        // –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å—Å—ã–ª–æ–∫
        String userId = UUID.randomUUID().toString();
        ShortLink link1 = service.createShortLink(
            "https://example1.com", userId, 3);
        ShortLink link2 = service.createShortLink(
            "https://example2.com", userId, 5);
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
        assertTrue(service.processRedirect(link1.getShortCode()).isPresent());
        assertTrue(service.processRedirect(link2.getShortCode()).isPresent());
        
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Å—ã–ª–æ–∫
        assertEquals(2, service.getUserLinks(userId).size());
        
        expiration.stop();
    }
}
4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
java
public class PerformanceTest {
    @Test
    void testConcurrentAccess() throws InterruptedException {
        LinkShortenerService service = new LinkShortenerService();
        String shortCode = service.createShortLink(
            "https://example.com", "user1", 1000).getShortCode();
        
        int threadCount = 100;
        ExecutorService executor = Executors.newFixedThreadPool(threadCount);
        CountDownLatch latch = new CountDownLatch(threadCount);
        
        AtomicInteger successCount = new AtomicInteger();
        
        // 100 –ø–æ—Ç–æ–∫–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –æ–¥–Ω–æ–π —Å—Å—ã–ª–∫–µ
        for (int i = 0; i < threadCount; i++) {
            executor.submit(() -> {
                if (service.processRedirect(shortCode).isPresent()) {
                    successCount.incrementAndGet();
                }
                latch.countDown();
            });
        }
        
        latch.await();
        assertEquals(threadCount, successCount.get());
        executor.shutdown();
    }
}
–¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# 2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
# 3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Å—ã–ª–æ–∫ —Å —Ä–∞–∑–Ω—ã–º–∏ –ª–∏–º–∏—Ç–∞–º–∏
# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —Å—Å—ã–ª–∫–∞–º
# 5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
# 6. –£–¥–∞–ª–∏—Ç–µ –æ–¥–Ω—É –∏–∑ —Å—Å—ã–ª–æ–∫
# 7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–¥–∞–ª–µ–Ω–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏
bash
# 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º URL
# 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —Å –ª–∏–º–∏—Ç–æ–º 1 –ø–µ—Ä–µ—Ö–æ–¥
# 3. –ü–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å —á—É–∂—É—é —Å—Å—ã–ª–∫—É (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
# 4. –ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Å—ã–ª–∫–µ
# 5. –°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏ —Å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º –ª–∏–º–∏—Ç–æ–º (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
–°—Ü–µ–Ω–∞—Ä–∏–π 3: –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞
bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
# 2. –°–æ–∑–¥–∞–π—Ç–µ 1000 —Å—Å—ã–ª–æ–∫
# 3. –û—Å—Ç–∞–≤—å—Ç–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ 24+ —á–∞—Å–æ–≤
# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—é—Ç—Å—è
# 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
–ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ú–µ—Ç—Ä–∏–∫–∞	–û–∂–∏–¥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ	–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏	< 1 –º—Å	System.currentTimeMillis()
–í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞	< 0.5 –º—Å	–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ (1000 —Å—Å—ã–ª–æ–∫)	< 200 –ö–ë	Runtime.totalMemory()
–ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å	0 –æ—à–∏–±–æ–∫ –ø—Ä–∏ 100 –ø–æ—Ç–æ–∫–∞—Ö	–ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π —Ç–µ—Å—Ç
–£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–æ–≤	0 –∫–æ–ª–ª–∏–∑–∏–π –Ω–∞ 10,000	–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–ë–µ–Ω—á–º–∞—Ä–∫–∏
–°–æ–∑–¥–∞–Ω–∏–µ —Å—Å—ã–ª–∫–∏: ~0.01 –º—Å

–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞: ~0.001 –º—Å

–ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Å—ã–ª–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: ~0.005 –º—Å

–û—á–∏—Å—Ç–∫–∞ 1000 —Å—Å—ã–ª–æ–∫: ~10 –º—Å

–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
–î–æ 1,000,000 —Å—Å—ã–ª–æ–∫: —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (~200 –ú–ë RAM)

–î–æ 10,000,000 —Å—Å—ã–ª–æ–∫: —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 1000+ –≤ —Å–µ–∫—É–Ω–¥—É –Ω–∞ –æ–¥–Ω–æ–º —è–¥—Ä–µ

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: –¥–∞–Ω–Ω—ã–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ

–û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä: –Ω–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

–ù–µ—Ç —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏: single point of failure

üîß –î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –∫–æ–¥–æ–≤
java
// 8 —Å–∏–º–≤–æ–ª–æ–≤ –∏–∑ 62 –≤–æ–∑–º–æ–∂–Ω—ã—Ö = 218 —Ç—Ä–∏–ª–ª–∏–æ–Ω–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
String ALPHABET = "a-zA-Z0-9"; // 62 —Å–∏–º–≤–æ–ª–∞
SecureRandom random = new SecureRandom(); // –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è
java
// –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
// 1. –ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å—Å—ã–ª–∫–µ
// 2. –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –∫–∞–∂–¥—ã–µ 30 –º–∏–Ω—É—Ç
// 3. –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
public Optional<String> processRedirect(String code) {
    if (link.getExpiresAt().isBefore(LocalDateTime.now())) {
        link.setActive(false); // –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è
        return Optional.empty();
    }
}
3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
java
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:
// - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –∂–∏–≤—É—Ç 24 —á–∞—Å–∞
// - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
// - –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ñ–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞
public void cleanupExpiredLinks() {
    // –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–≤–µ–∂–∏—Ö –∏—Å—Ç—ë–∫—à–∏—Ö —Å—Å—ã–ª–æ–∫
    // –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ (>7 –¥–Ω–µ–π)
}
4. –ü–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
java
// ConcurrentHashMap –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏–∑ –º–Ω–æ–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤
private final Map<String, ShortLink> linksByCode = new ConcurrentHashMap<>();
private final Map<String, List<String>> userLinks = new ConcurrentHashMap<>();
üìà –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
1. –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ SQL/NoSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

–°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ —Ñ–∞–π–ª

–†–µ–ø–ª–∏–∫–∞—Ü–∏—è –º–µ–∂–¥—É –∏–Ω—Å—Ç–∞–Ω—Å–∞–º–∏

2. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (Redis, Cassandra)

–ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

3. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
–ú–µ—Ç—Ä–∏–∫–∏ Prometheus

–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ ELK Stack

Health checks –∏ readiness probes

4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö URL

–ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫

Rate limiting

5. –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
–ö–∞—Å—Ç–æ–º–Ω–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Å—Å—ã–ª–æ–∫

–ü–∞—Ä–æ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Å—ã–ª–æ–∫

–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
